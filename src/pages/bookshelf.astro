---
import { Image } from 'astro:assets';
import BaseLayout from '../layouts/BaseLayout.astro';

const images = import.meta.glob<{ default: ImageMetadata }>('../images/bookshelf/*.{jpeg,jpg,png,gif}', { eager: true });
const imageList = Object.entries(images).map(([path, img]) => ({
  path,
  image: img.default,
  name: path.split('/').pop()?.replace(/\.[^.]+$/, '') || 'book'
}));

---
<BaseLayout title="bookshelf" description="books read by Keaton Elvins">
  <p class="mb-8 text-xl md:text-2xl font-[Erode-Variable]" style="color: var(--color-muted)">
    march 2023 - nov 2025
  </p>

  <div class="-mx-10 md:-mx-20 lg:-mx-32">
    <div class="columns-3 md:columns-5 gap-6 px-4 md:px-8 lg:px-16">
      {imageList.map(({ image, name }) => (
        <div class="mb-6" style="break-inside: avoid; display: inline-block; width: 100%;">
          <Image
            src={image}
            alt={name}
            class="w-full h-auto"
            loading="lazy"
          />
        </div>
      ))}
    </div>
  </div>
</BaseLayout>
